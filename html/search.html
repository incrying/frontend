<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>함께임</title>
    <link rel="stylesheet" href="../css/search.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR:wght@500&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="nav-wrapper">
      <a href="main.html"><img src="../img/title.png" alt="타이틀" /></a>
      <div class="search">
        <input type="text" /><button>
          <img src="../img/serch.png" alt="검색" />
        </button>
      </div>
    </div>

    <nav>
      <ul class="nav-list">
        <li ><a href="main.html">인기 게임</a></li>
        <li class="bold"><a href="search.html">게임 검색</a></li>
        <li><a href="add_game.html">게임 등록</a></li>
        <li><a href="mypage.html">마이페이지</a></li>
      </ul>
      <ul class="nav-list">
        <li><a href="login.html">로그인</a></li>
        <li>
          <a href="add_user.html">회원 가입</a>
        </li>
      </ul>
    </nav>
    <hr />

    <h2>어떤 게임을 찾고 계시나요?</h2>
    <div class="container">
      <div class="sec1">
        <div class="background">
          <div class="select-name">
            <span>상황</span>
            <span>장소</span>
            <span>장르</span>
            <span>정렬 방식</span>
          </div>
          <div class="select-buttons">
            <div class="select-options" id="group1">
              <button class="option" value="전체">전체</button>
              <button class="option" value="MT">MT</button>
              <button class="option" value="내기">내기</button>
              <button class="option" value="기타">기타</button>
            </div>

            <div class="select-options" id="group2">
              <button class="option" value="전체">전체</button>
              <button class="option" value="실내">실내</button>
              <button class="option" value="야외">야외</button>
              <button class="option" value="온라인">온라인</button>
            </div>

            <div class="select-options" id="group2">
              <button class="option" value="전체">전체</button>
              <button class="option" value="퀴즈">퀴즈</button>
              <button class="option" value="순발력">순발력</button>
              <button class="option" value="두뇌게임">두뇌게임</button>
            </div>

            <div class="select-options" id="group2">
              <button class="option" value="전체">전체</button>
                <button class="option" value="최신순">최신순</button>
                <button class="option" value="인기순">인기순</button>
                <button class="option" value="가나다순">가나다순</button>
            </div>
          </div>
        </div>

        <div class="buttons">
          <button id="game-search">검색</button>
          <button id="reset">초기화</button>
        </div>
      </div>
      <div class="sec2">
        <ul>
          <li>
            <img src="../img/thumbnail.png" alt="thumbnail" />
            <div class="list-info">
              <div class="list-title">
                <span>게임의 제목이에요~</span>
                <div class="heart">
                  <img src="../img/likefull.png" alt="" /><span>65</span>
                </div>
              </div>
              <ul class="game-info">
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
              </ul>
            </div>
          </li>

          <li>
            <img src="../img/thumbnail.png" alt="thumbnail" />
            <div class="list-info">
              <div class="list-title">
                <span>게임의 제목이에요~</span>
                <div class="heart">
                  <img src="../img/likefull.png" alt="" /><span>65</span>
                </div>
              </div>
              <ul class="game-info">
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
              </ul>
            </div>
          </li>

          <li>
            <img src="../img/thumbnail.png" alt="thumbnail" />
            <div class="list-info">
              <div class="list-title">
                <span>게임의 제목이에요~</span>
                <div class="heart">
                  <img src="../img/likefull.png" alt="" /><span>65</span>
                </div>
              </div>
              <ul class="game-info">
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
              </ul>
            </div>
          </li>

          <li>
            <img src="../img/thumbnail.png" alt="thumbnail" />
            <div class="list-info">
              <div class="list-title">
                <span>게임의 제목이에요~</span>
                <div class="heart">
                  <img src="../img/likefull.png" alt="" /><span>65</span>
                </div>
              </div>
              <ul class="game-info">
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
                <li>
                  <span>인원</span>
                  <p>전체</p>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </div>
    </div>

    <script>
      // 옵션 선택 시 실행될 함수
      var groups = document.querySelectorAll(".select-options");
      for (var i = 0; i < groups.length; i++) {
        groups[i].addEventListener("click", function (event) {
          var options = this.querySelectorAll(".option");
          for (var j = 0; j < options.length; j++) {
            options[j].classList.toggle("selected", false);
          }
          if (event.target.classList.contains("option")) {
            event.target.classList.toggle("selected", true);
          }
        });
      }

      // 검색 버튼 클릭 시 실행될 함수
      document
        .getElementById("game-search")
        .addEventListener("click", function () {
          var 선택된옵션 = document.querySelectorAll(".selected");
          if (선택된옵션.length > 0) {
            var 선택된옵션값 = Array.from(선택된옵션).map(
              (option) => option.value
            );

            // 선택된 옵션 값을 출력
            var 결과 = "선택한 옵션: " + 선택된옵션값.join(", ");
            document.getElementById("결과").textContent = 결과;

            // 여기에 추가: 폼을 동적으로 생성하여 Django로 데이터 전송
            var form = document.createElement("form");
            form.action = "{% url 'search_view' %}"; // Django URL 설정에 따라 변경
            form.method = "post";

            for (var i = 0; i < 선택된옵션값.length; i++) {
              var input = document.createElement("input");
              input.type = "hidden";
              input.name = "selectedOptions[]";
              input.value = 선택된옵션값[i];
              form.appendChild(input);
            }

            document.body.appendChild(form);
            form.submit();
          } else {
            document.getElementById("결과").textContent =
              "옵션을 선택해주세요.";
          }
        });

      // 초기화 버튼 클릭 시 실행될 함수
      document.getElementById("reset").addEventListener("click", function () {
        // 모든 선택한 옵션들 초기화
        var options = document.querySelectorAll(".option");
        for (var j = 0; j < options.length; j++) {
          options[j].classList.toggle("selected", false);
        }
        // 결과 영역 초기화
        document.getElementById("결과").textContent = "";
      });
    </script>
  </body>
</html>
